<style>
  #pg-form { max-width: 100%; margin: 0 auto; font-family: sans-serif; color: #333; padding-bottom: 120px; }
  .pg-card { background: #fdfdfd; border: 1px solid #eee; padding: 12px; border-radius: 8px; margin-bottom: 10px; }
  .pg-title { font-weight: bold; font-size: 14px; margin-bottom: 5px; display: block; }
  .pg-input-field { width: 100% !important; padding: 10px !important; border: 1px solid #ccc !important; border-radius: 5px !important; font-size: 16px !important; box-sizing: border-box !important; }

  .pg-cat-tag { background: #34495e; color: #fff; padding: 5px 10px; border-radius: 4px; margin: 20px 0 10px 0; font-size: 12px; font-weight: bold; }

  .pg-row {
    display: flex !important; align-items: center !important; justify-content: space-between !important;
    padding: 10px 5px !important; border-bottom: 1px solid #eee !important; background: #fff !important;
  }
  .pg-name-box { flex: 1 !important; font-weight: bold; font-size: 14px; line-height: 1.3; }
  .pg-price-tag { color: #e74c3c; font-size: 11px; margin-left: 5px; font-weight: normal; }

  .pg-qty {
    width: 70px !important; min-width: 70px !important; height: 40px !important;
    text-align: center !important; font-size: 18px !important; font-weight: bold !important;
    border: 2px solid #3498db !important; border-radius: 6px !important; margin-left: 10px !important;
    -webkit-appearance: none;
  }

  .pg-footer-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 15px; border-top: 3px solid #3498db; text-align: center; z-index: 99999; box-shadow: 0 -3px 15px rgba(0,0,0,0.1); }
  .pg-total-txt { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
  .pg-btn-line { display: block; background: #06C755; color: white !important; text-decoration: none !important; padding: 15px; border-radius: 35px; font-weight: bold; font-size: 18px; box-shadow: 0 4px 0 #05a346; }
</style>

<div id="pg-form">
  <h3 style="text-align:center; color:#3498db;">ğŸ§ ã”äºˆç´„æ³¨æ–‡ãƒ•ã‚©ãƒ¼ãƒ </h3>

  <div class="pg-card">
    <span class="pg-title">â–  ãŠåå‰</span>
    <input type="text" id="custName" class="pg-input-field" placeholder="ä¾‹ï¼šãºã‚“ãã‚“å¤ªéƒ">
  </div>

  <div class="pg-card">
    <span class="pg-title">â–  å‡ºåº—å ´æ‰€ã‚’é¸æŠ</span>
    <select id="custPlace" class="pg-input-field">
      <option value="">å ´æ‰€ã‚’é¸æŠã—ã¦ãã ã•ã„</option>
      <option value="2/17(ç«) ã‚¤ã‚ªãƒ³é´»æ± ">2/17(ç«) ã‚¤ã‚ªãƒ³é´»æ± </option>
      <option value="2/21(åœŸ) å ºä¸­å¤®å…¸ç¤¼ä¼šé¤¨">2/21(åœŸ) å ºä¸­å¤®å…¸ç¤¼ä¼šé¤¨</option>
      <option value="2/22(æ—¥) ã‚¨ã‚³ãƒ¼ãƒ«ãƒ»ãƒ­ã‚¼å¯Œç”°æ—">2/22(æ—¥) ã‚¨ã‚³ãƒ¼ãƒ«ãƒ»ãƒ­ã‚¼å¯Œç”°æ—</option>
      <option value="2/25(æ°´) ãã‚ˆã‚‰æ–°é‡‘å²¡">2/25(æ°´) ãã‚ˆã‚‰æ–°é‡‘å²¡</option>
    </select>
  </div>

  <div class="pg-card">
    <span class="pg-title">â–  ãŠå—å–ã‚Šå¸Œæœ›æ™‚é–“</span>
    <select id="custTime" class="pg-input-field">
      <option value="">æ™‚é–“ã‚’é¸æŠã—ã¦ãã ã•ã„</option>
      <option value="11:30ã”ã‚">11:30ã”ã‚</option>
      <option value="12:00ã”ã‚">12:00ã”ã‚</option>
      <option value="13:00ã”ã‚">13:00ã”ã‚</option>
      <option value="14:00ã”ã‚">14:00ã”ã‚</option>
      <option value="15:00ã”ã‚">15:00ã”ã‚</option>
      <option value="16:00ã”ã‚">16:00ã”ã‚</option>
    </select>
  </div>

  <div class="pg-cat-tag">âœ¨ ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚¯ãƒ¬ãƒ¼ãƒ—</div>

  <div class="pg-row">
    <div class="pg-name-box">
      ç”Ÿã„ã¡ã”ãƒ›ã‚¤ãƒƒãƒ—<span class="pg-price-tag">700å††</span>
    </div>
    <input type="number" class="pg-qty" data-name="ç”Ÿã„ã¡ã”ãƒ›ã‚¤ãƒƒãƒ—" data-price="700" value="0" min="0">
  </div>

</div>

<div class="pg-footer-bar">
  <div class="pg-total-txt">
    åˆè¨ˆï¼š<span id="total-val" style="color:#e74c3c; font-size:24px;">0</span>å††
  </div>
  <a href="javascript:void(0)" id="sendLineBtn" class="pg-btn-line">
    LINEã«æ³¨æ–‡ã‚’é€ã‚‹
  </a>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const inputs = Array.from(document.querySelectorAll('.pg-qty'));
  const totalDisp = document.getElementById('total-val');
  const sendBtn = document.getElementById('sendLineBtn');

  function calc() {
    let total = 0;
    inputs.forEach(input => {
      const price = Number(input.dataset.price || 0);
      const qty = Number(input.value || 0);
      total += price * qty;
    });
    totalDisp.textContent = total.toLocaleString();
  }

  calc();
  inputs.forEach(input => {
    input.addEventListener('input', calc);
    input.addEventListener('change', calc);
  });

  sendBtn.addEventListener('click', () => {
    const name = document.getElementById('custName').value.trim();
    const place = document.getElementById('custPlace').value;
    const time  = document.getElementById('custTime').value;

    let details = "";
    let sum = 0;

    inputs.forEach(input => {
      const q = Number(input.value || 0);
      if (q > 0) {
        details += "ãƒ»" + input.dataset.name + " Ã— " + q + "\n";
        sum += q * Number(input.dataset.price || 0);
      }
    });

    if (!name || !place || !time || sum === 0) {
      alert("ãŠåå‰ã€å ´æ‰€ã€æ™‚é–“ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ğŸ§");
      return;
    }

    const msg =
      "ã€äºˆç´„æ³¨æ–‡ã€‘\n" +
      "â– ãŠåå‰ï¼š" + name + "\n" +
      "â– å ´æ‰€ï¼š" + place + "\n" +
      "â– æ™‚é–“ï¼š" + time + "\n\n" +
      "â– å†…å®¹ï¼š\n" +
      details +
      "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n" +
      "åˆè¨ˆï¼š" + sum.toLocaleString() + "å††";

    // âœ… æ”¹è¡Œã‚’ç¢ºå®Ÿã«æ‰±ã†ï¼ˆç«¯æœ«å·®å¯¾ç­–ï¼‰
    const normalizedMsg = msg.replace(/\r\n|\r|\n/g, "\n");
    const text = encodeURIComponent(normalizedMsg).replace(/%0D%0A|%0A|%0D/g, "%0A");

    const url = "https://line.me/R/msg/text/?" + text;
    window.location.href = url;
  });
});
</script>
